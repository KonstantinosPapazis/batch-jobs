{
  "jobDefinitionName": "simple-batch-job",
  "type": "container",
  "platformCapabilities": ["EC2"],
  "containerProperties": {
    "image": "123456789012.dkr.ecr.us-east-1.amazonaws.com/batch-jobs:latest",
    "resourceRequirements": [
      {
        "type": "VCPU",
        "value": "1"
      },
      {
        "type": "MEMORY",
        "value": "2048"
      }
    ],
    "command": ["python", "app.py"],
    "jobRoleArn": "arn:aws:iam::123456789012:role/batch-jobs-prod-batch-job-role",
    "executionRoleArn": "arn:aws:iam::123456789012:role/batch-jobs-prod-batch-execution-role",
    "environment": [
      {
        "name": "ENVIRONMENT",
        "value": "production"
      },
      {
        "name": "PROCESSING_MODE",
        "value": "standard"
      }
    ],
    "logConfiguration": {
      "logDriver": "awslogs",
      "options": {
        "awslogs-group": "/aws/batch/batch-jobs-prod",
        "awslogs-region": "us-east-1",
        "awslogs-stream-prefix": "simple-job"
      }
    }
  },
  "retryStrategy": {
    "attempts": 3,
    "evaluateOnExit": [
      {
        "action": "RETRY",
        "onStatusReason": "Host EC2*"
      },
      {
        "action": "RETRY",
        "onExitCode": "1"
      },
      {
        "action": "EXIT",
        "onExitCode": "0"
      }
    ]
  },
  "timeout": {
    "attemptDurationSeconds": 1800
  }
}

